# ABCDE Configuration for Offline Operation (No Internet Required)
# This config works without internet connectivity

# CD device
CDROM=/dev/sr0

# Output directory
OUTPUTDIR="/media/rsd/MUSIC"

# Output type and quality
OUTPUTTYPE="flac,mp3"
FLACENCODERSYNTAX=flac
FLACOPTS='--verify --best'
MP3ENCODERSYNTAX=lame
LAMEOPTS='-V0 --vbr-new'

# Actions to perform (removed cddb lookup and tagging to avoid eyeD3 issues)
ACTIONS=read,encode,move,clean

# Non-interactive mode
INTERACTIVE=n

# Use cdparanoia for better error correction
CDROMREADERSYNTAX=cdparanoia            
CDPARANOIA=cdparanoia  
CDPARANOIAOPTS="--never-skip=40"

# Don't eject automatically (we handle ejection in Python)
EJECTCD=n

# Padding for track numbers
PADTRACKS=y
OUTPUTFORMAT='Unknown_Artist/Unknown_Album/${TRACKNUM} - Track_${TRACKNUM}'

# Skip CDDB/MusicBrainz entirely
CDDBMETHOD=none

# Default metadata when no internet available
DARTIST="Unknown Artist"
DALBUM="Unknown Album $(date +%Y-%m-%d_%H-%M)"
DYEAR=$(date +%Y)
DGENRE="Unknown"

# Character translations for safe filenames
mungefilename ()
{
    echo "$@" | sed -e 's/^\.*//' -e 's/[^A-Za-z0-9._-]/_/g' -e 's/__*/_/g' -e 's/_$//g' -e 's/^_//g'
}

# Pre and post encode functions
pre_read ()
{
    echo "$(date): Starting offline rip (no metadata lookup)" >> /var/log/auto-ripper/rip.log
}

post_encode ()
{
    echo "$(date): Completed offline rip: $OUTPUTDIR/$DARTIST/$DALBUM" >> /var/log/auto-ripper/rip.log
}

# Encoding threads
MAXPROCS=2
